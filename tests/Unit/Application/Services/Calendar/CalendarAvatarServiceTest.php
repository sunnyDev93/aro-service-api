<?php

declare(strict_types=1);

namespace Tests\Unit\Application\Services\Calendar;

use App\Application\Services\Calendar\CalendarAvatarService;
use App\Infrastructure\Services\Workday\WorkdayService;
use ImagickException;
use Tests\TestCase;
use Tests\Tools\TestValue;

class CalendarAvatarServiceTest extends TestCase
{
    private const AVATAR_BASE64 = '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';

    /**
     * @test
     */
    public function it_returns_avatar_string(): void
    {
        $workdayServiceMock = \Mockery::mock(WorkdayService::class);

        $workdayServiceMock->shouldReceive('getEmployeePhotoBase64')
            ->once()
            ->with(TestValue::WORKDAY_ID)
            ->andReturn(self::AVATAR_BASE64);

        $calendarAvatarService = new CalendarAvatarService($workdayServiceMock);

        $avatar = $calendarAvatarService->getAvatar(TestValue::WORKDAY_ID);

        $this->assertIsString($avatar);
    }

    /**
     * @test
     */
    public function it_returns_avatar_from_cache_string(): void
    {
        $workdayServiceMock = \Mockery::mock(WorkdayService::class);

        $workdayServiceMock->shouldReceive('getEmployeePhotoBase64')
            ->once()
            ->with(TestValue::WORKDAY_ID)
            ->andReturn(self::AVATAR_BASE64);

        $calendarAvatarService = new CalendarAvatarService($workdayServiceMock);

        $avatar1 = $calendarAvatarService->getAvatar(TestValue::WORKDAY_ID);
        $avatar2 = $calendarAvatarService->getAvatar(TestValue::WORKDAY_ID);

        $this->assertEquals($avatar1, $avatar2);
    }

    /**
     * @test
     */
    public function it_throws_exception_when_incorrect_image_received(): void
    {
        $workdayServiceMock = \Mockery::mock(WorkdayService::class);

        $workdayServiceMock->shouldReceive('getEmployeePhotoBase64')
            ->once()
            ->with(TestValue::WORKDAY_ID)
            ->andReturn('invalid base 64 string');

        $calendarAvatarService = new CalendarAvatarService($workdayServiceMock);

        $this->expectException(ImagickException::class);

        $calendarAvatarService->getAvatar(TestValue::WORKDAY_ID);
    }
}
